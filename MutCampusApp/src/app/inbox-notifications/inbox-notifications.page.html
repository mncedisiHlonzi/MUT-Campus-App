<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button default-href="#"></ion-back-button>
    </ion-buttons>
    <ion-title>Messages</ion-title>
    <ion-buttons slot="end">
      <ion-button> <ion-icon name="chatbubbles-outline"></ion-icon> </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- New Messages Section -->
  <ion-card id="list-card" *ngIf="newMessages.length > 0">
    <ion-card-header>
      <ion-card-title>New Messages<ion-icon class="dep_head" name="pulse-sharp"></ion-icon></ion-card-title>
    </ion-card-header>
    <ion-list lines="none" id="list">
      <ion-item *ngFor="let message of newMessages" detail="true" (click)="markAsRead(message.notificationId)">
        <ion-icon class="notifications-icon" name="chatbubbles-sharp"></ion-icon>
        <ion-label class="post-details">
          <h3>Message</h3>
          <p>From <span class="post-from">{{ message.studentName }}</span> • <span class="time-posted">{{ message.createdAt | dateAgo }}</span></p>
        </ion-label>
      </ion-item>
    </ion-list>
  </ion-card>

  <!-- Viewed Messages Section -->
  <ion-card id="list-card" *ngIf="viewedMessages.length > 0">
    <ion-card-header>
      <ion-card-title>Viewed Messages<ion-icon class="dep_head" name="pulse-sharp"></ion-icon></ion-card-title>
    </ion-card-header>
    <ion-list lines="none" id="list">
      <ion-item *ngFor="let message of viewedMessages" class="read" detail="true">
        <ion-icon class="notifications-icon" name="chatbubbles-sharp"></ion-icon>
        <ion-label class="post-details">
          <h3>Message</h3>
          <p>From <span class="post-from">{{ message.studentName }}</span> • <span class="time-posted">{{ message.createdAt | dateAgo }}</span></p>
        </ion-label>
      </ion-item>
    </ion-list>
  </ion-card>

  <!-- No Messages Section -->
  <div *ngIf="newMessages.length === 0 && viewedMessages.length === 0" class="no-messages">
    <img src="../../assets/images/timetable.jpg" alt="No Notifications">
    <p>No notifications available</p>
  </div>
</ion-content>
